<!DOCTYPE html>
<html lang="en">

<!-- For tool tips -->
<script src="https://unpkg.com/@popperjs/core@2/dist/umd/popper.min.js"></script>
<script src="https://unpkg.com/tippy.js@6/dist/tippy-bundle.umd.js"></script>

<head>
  <meta charset="UTF-8">
  <title>Academic Achievement, Funding, and Diversity</title>
  <h1>Does Diversity Make Us Smarter?</h1>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://unpkg.com/topojson@3"></script>
  <style>
    .county :hover {
      fill: lightskyblue;
    }

    /* This styles the tool tip. I copied .tippy-box and .tippy-box table from our Hands On 3 code. */
    .tippy-box {
      background-color: black;
      color: white;
      font-family: sans-serif;
      padding: 5px 8px;
      border-radius: 5px;
      opacity: 0.9;
      font-weight: bold;
    }

    .tippy-box table {
      font-size: 8pt;
      color: white;
    }

  </style>

  <script src="bargraph.js"></script>
  <script src="map.js"></script>

</head>
<body>
<svg id="nc_map" style="width: 600; height: 400; border: 1px solid black;"></svg>

<p>Select a county:
  <select onchange="bar.loadAndPrepare(this.options[this.selectedIndex].value);">
    <option value="1">Alamance</option>
    <option value="2">Alexander</option>
    <option value="3">Alleghany</option>
    <option value="4">Anson</option>
    <option value="5">Ashe</option>
    <option value="6">Avery</option>
  </select>
</p>

<div class="chart">
</div>

<script>

  let bar = new BarGraph("chart");
  let map = new NC_Map()

  Promise.all([
    d3.csv("nc_county_data.csv"),
    d3.json("nc-counties.json"),
    d3.csv("myfuturenc.csv")
  ])
          .then(map.render);

  map.dispatch.on("selectCounty", bar.filterCounty.bind(map))


</script>
</body>
</html>